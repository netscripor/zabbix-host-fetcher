# üîç Zabbix Host Fetcher

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π CLI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è IP-–∞–¥—Ä–µ—Å–æ–≤ –∏–ª–∏ –∏–º—ë–Ω —Ö–æ—Å—Ç–æ–≤ –∏–∑ Zabbix, —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –≥—Ä—É–ø–ø–µ, —à–∞–±–ª–æ–Ω—É –∏ —Ç–µ–≥–∞–º.

üìå –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:
- —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤
- DevOps-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤
- –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ API Zabbix

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/netscripor/zabbix_host_fetcher.git
cd zabbix-host-fetcher
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

---

## ‚öôÔ∏è –ê—Ä–≥—É–º–µ–Ω—Ç—ã CLI

| –ê—Ä–≥—É–º–µ–Ω—Ç         | –û–ø–∏—Å–∞–Ω–∏–µ                                                                 |
|------------------|--------------------------------------------------------------------------|
| `--zabbix-url`   | URL Zabbix-—Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `https://10.10.10.10)                |
| `--user`         | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Zabbix                                                  |
| `--password`     | –ü–∞—Ä–æ–ª—å (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—à–µ–Ω –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ)                     |
| `--group`        | –ò–º—è –≥—Ä—É–ø–ø—ã —Ö–æ—Å—Ç–æ–≤                                                        |
| `--template`     | –ò–º—è —à–∞–±–ª–æ–Ω–∞ (template), —Å–≤—è–∑–∞–Ω–Ω–æ–≥–æ —Å —Ö–æ—Å—Ç–æ–º                              |
| `--tag`          | –§–∏–ª—å—Ç—Ä –ø–æ —Ç–µ–≥–∞–º `key=value` (–º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑)              |
| `--mode`         | –¢–∏–ø –≤—ã–≤–æ–¥–∞: `host` (IP-–∞–¥—Ä–µ—Å) –∏–ª–∏ `name` (–æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è)              |
| `--output`       | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –¥–ª—è –≤—ã–≤–æ–¥–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `output_hosts.txt`)               |

---

## üß© –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### üîπ –ü–æ–ª—É—á–∏—Ç—å IP-–∞–¥—Ä–µ—Å–∞ –≤—Å–µ—Ö Cisco-—Ö–æ—Å—Ç–æ–≤ –∏–∑ –≥—Ä—É–ø–ø—ã "Networks L3":
```bash
python get_hosts.py \
  --user admin \
  --group "Networks L3" \
  --template "Relevant Cisco IOS SNMP" \
  --mode host
```

### üîπ –ü–æ–ª—É—á–∏—Ç—å –∏–º–µ–Ω–∞ —Ö–æ—Å—Ç–æ–≤ —Å —Ç–µ–≥–æ–º `location=dc1`:
```bash
python get_hosts.py \
  --user admin \
  --tag location=dc1 \
  --mode name
```

### üîπ –í—ã–≤–µ—Å—Ç–∏ IP —Ö–æ—Å—Ç–æ–≤ —Å –¥–≤—É–º—è —Ç–µ–≥–∞–º–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```bash
python get_hosts.py \
  --group "Router wi-fi" \
  --template "Relevant AC Mikrotik by SNMP" \
  --tag environment=prod role=access \
  --mode host \
  --output wifi_prod_hosts.txt
```

---

## üßØ –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

- ‚ùó **"–ì—Ä—É–ø–ø–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"** ‚Äî –ø—Ä–æ–≤–µ—Ä—å —Ç–æ—á–Ω–æ–µ –∏–º—è –≥—Ä—É–ø–ø—ã —Ö–æ—Å—Ç–æ–≤ –≤ Zabbix.
- ‚ùó **"–®–∞–±–ª–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω"** ‚Äî –∏–º—è —à–∞–±–ª–æ–Ω–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É.
- ‚ùó **"–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ç–µ–≥–∞"** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–æ–≥–æ `key=value`.
- ‚ö† **"[no ip]"** ‚Äî —É —Ö–æ—Å—Ç–∞ –Ω–µ—Ç –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ–≥–æ IP-–∞–¥—Ä–µ—Å–∞ (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞).

---

## üì¶ `requirements.txt`

```
pyzabbix==1.3.0
urllib3==1.25.8
```

---

üì° –ü–æ–¥–ø–∏—à–∏—Å—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏ –ø—Ä–æ–µ–∫—Ç:

üîó GitHub: github.com/netscripor
üí∞ Boosty: boosty.to/netscripor
‚úàÔ∏è Telegram-–∫–∞–Ω–∞–ª: t.me/netscripor

‚≠êÔ∏è –ü–æ–¥–¥–µ—Ä–∂–∏ –ø—Ä–æ–µ–∫—Ç –∑–≤–µ–∑–¥–æ–π
üõ† –ù–∞—à—ë–ª –±–∞–≥ –∏–ª–∏ –µ—Å—Ç—å –∏–¥–µ—è? –°–æ–∑–¥–∞–π Issue!
